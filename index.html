<!doctype html>
<html lang="pl">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>Raport Kredytowy</title>
    <meta name="theme-color" content="#1d3557">
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="apple-touch-icon" href="icon-192.png">
    <style>
      :root {
        --primary: #1d3557;
        --muted: #6b7683;
        --bg: #f0f2f5;
        --card: #ffffff;
        --border: #e6e9ef;
      }
      * { box-sizing: border-box; }
      html, body { margin:0; padding:0; background:var(--bg); color:#111827; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; }
      .wrap { max-width: 960px; margin: 0 auto; padding: 16px; }
      .header { background:var(--primary); color:#fff; padding:24px; border-radius:20px; }
      .title { margin:0; font-size:20px; font-weight:700; }
      .subtitle { margin:6px 0 0; opacity:.85; font-size:14px; }
      .grid { display:grid; grid-template-columns: 1fr; gap:12px; }
      @media (min-width: 640px) { .grid-2 { grid-template-columns: 1fr 1fr; } }
      .card { background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow: 0 1px 3px rgba(0,0,0,.05); }
      .card-pad { padding:16px; }
      .kpi-title { font-size:12px; text-transform: uppercase; letter-spacing:.08em; color:var(--muted); }
      .kpi-value { font-size:24px; font-weight:700; color:#1f2937; }
      h2 { color:var(--primary); font-size:16px; margin:16px 0 8px; }
      table { width:100%; border-collapse: collapse; }
      th, td { border:1px solid #dee2e6; padding:10px; font-size:14px; text-align:left; }
      thead th { background:#f8f9fa; font-weight:600; }
      .progress { height:28px; background:#e6edf5; border-radius:14px; overflow:hidden; }
      .progress > div { height:100%; background:var(--primary); color:#fff; display:flex; align-items:center; justify-content:center; font-weight:700; }
      .legend { font-size:13px; color:#495057; }
      .legend-sq { display:inline-block; width:10px; height:10px; border-radius:2px; margin-right:6px; }
      .center { text-align:center; }
      .row { display:grid; grid-template-columns: 1fr; gap:10px; }
      @media (min-width: 640px) { .row-3 { grid-template-columns: 1fr 1fr 1fr; } }
      .muted { color:#6b7280; }
      .footer { text-align:center; font-size:12px; color:#6b7280; margin: 18px 0; }
    </style>
    <script>
      // Register SW
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => navigator.serviceWorker.register('./sw.js'));
      }
      // Config
      window.RAPORT_ENDPOINT = "https://YOUR-APPS-SCRIPT-WEBAPP-URL/exec?path=/api/report/json"; // <- podmie≈Ñ na sw√≥j URL Apps Script
    </script>
  </head>
  <body>
    <div class="wrap">
      <header class="header">
        <h1 class="title">Tw√≥j Zaawansowany Raport Kredytowy</h1>
        <p class="subtitle" id="asOf">≈Åadowanie...</p>
      </header>

      <section class="grid grid-2" style="margin-top:12px;">
        <div class="card"><div class="card-pad center"><div class="kpi-title">WIBOR 3M</div><div class="kpi-value" id="wibor">‚Äî</div></div></div>
        <div class="card"><div class="card-pad center"><div class="kpi-title">Obecna rata</div><div class="kpi-value" id="curr">‚Äî</div></div></div>
        <div class="card"><div class="card-pad center"><div class="kpi-title">Szac. nowa rata</div><div class="kpi-value" id="new">‚Äî</div></div></div>
        <div class="card"><div class="card-pad center"><div class="kpi-title">R√≥≈ºnica</div><div class="kpi-value" id="diff">‚Äî</div></div></div>
      </section>

      <section>
        <h2>üöó Postƒôp sp≈Çaty</h2>
        <div class="card">
          <div class="card-pad">
            <div class="row row-3">
              <div class="muted">Kapita≈Ç poczƒÖtkowy:<br><b id="init">‚Äî</b></div>
              <div class="muted">Kapita≈Ç sp≈Çacony:<br><b id="paid">‚Äî</b></div>
              <div class="muted">Pozosta≈Ço do sp≈Çaty:<br><b id="rem">‚Äî</b></div>
            </div>
            <div style="margin-top:12px;">
              <div class="muted">Sp≈Çacono ju≈º <b id="pct">‚Äî</b> kapita≈Çu</div>
              <div class="progress" style="margin-top:6px;"><div id="bar" style="width:0%">0%</div></div>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h2>‚õ≥ Struktura Najbli≈ºszej Raty</h2>
        <div class="card">
          <div class="card-pad center">
            <img id="pie" alt="Struktura raty" style="max-width:100%;height:auto;display:block;margin:0 auto;border:0" />
            <div class="legend" style="margin-top:8px;">
              <span class="legend-sq" style="background:#1d3557"></span>Odsetki: <b id="odsetki">‚Äî</b>
              &nbsp;&nbsp;&nbsp;
              <span class="legend-sq" style="background:#a8dadc"></span>Kapita≈Ç: <b id="kapital">‚Äî</b>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h2>üìà Historia WIBOR 3M</h2>
        <div class="card">
          <div class="card-pad">
            <img id="wiborChart" alt="Wykres WIBOR 3M" style="max-width:100%;height:auto;display:block;margin:0 auto;border:0" />
          </div>
          <div class="card-pad" id="histTableWrap"></div>
        </div>
      </section>

      <section>
        <h2>üìä Prognozy FRA</h2>
        <div class="card">
          <div class="card-pad">
            <img id="fraChart" alt="Wykres prognoz FRA" style="max-width:100%;height:auto;display:block;margin:0 auto;border:0" />
          </div>
          <div class="card-pad" id="fraTableWrap"></div>
        </div>
      </section>

      <div class="footer">Dodaj do ekranu poczƒÖtkowego, aby u≈ºywaƒá jak natywnej aplikacji.</div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
